--- EntityLiving.java
+++ EntityLiving.java
@@ -154,14 +189,20 @@
 
                 int i = (int) (150.0D * d1);
 
-                ((WorldServer) this.world).a(EnumParticle.BLOCK_DUST, this.locX, this.locY, this.locZ, i, 0.0D, 0.0D, 0.0D, 0.15000000596046448D, Block.getCombinedId(iblockdata));
+                // CraftBukkit start - visiblity api
+                if (this instanceof EntityPlayer) {
+                    ((WorldServer) this.world).sendParticles((EntityPlayer) this, EnumParticle.BLOCK_DUST, false, this.locX, this.locY, this.locZ, i, 0.0D, 0.0D, 0.0D, 0.15000000596046448D, new int[] { Block.getCombinedId(iblockdata)});
+                } else {
+                    ((WorldServer) this.world).a(EnumParticle.BLOCK_DUST, this.locX, this.locY, this.locZ, i, 0.0D, 0.0D, 0.0D, 0.15000000596046448D, new int[] { Block.getCombinedId(iblockdata)});
+                }
+                // CraftBukkit end
             }
         }
 
         super.a(d0, flag, block, blockposition);
     }
 
-    public boolean canBreatheUnderwater() {
+    public boolean aY() {
         return false;
     }
 
@@ -191,7 +232,7 @@
 
         if (this.isAlive()) {
             if (this.a(Material.WATER)) {
-                if (!this.canBreatheUnderwater() && !this.hasEffect(MobEffectList.WATER_BREATHING.id) && !flag1) {
+                if (!this.aY() && !this.hasEffect(MobEffectList.WATER_BREATHING.id) && !flag1) {
                     this.setAirTicks(this.j(this.getAirTicks()));
                     if (this.getAirTicks() == -20) {
                         this.setAirTicks(0);
@@ -1162,12 +1429,23 @@
         return (float) this.getAttributeInstance(GenericAttributes.maxHealth).getValue();
     }
 
-    public final int getArrowsStuck() {
+    // TacoSpigot start - deobfuscation helper
+    public int getArrowsStuck() {
+        return this.bv();
+    }
+    // TacoSpigot end
+    public final int bv() {
         return this.datawatcher.getByte(9);
     }
 
-    public final void setArrowsStuck(int i) {
-        this.datawatcher.watch(9, (byte) i);
+
+    // TacoSpigot start - deobfuscation helper
+    public void setArrowsStuck(int i) {
+        this.o(i);
+    }
+    // TacoSpigot end
+    public final void o(int i) {
+        this.datawatcher.watch(9, Byte.valueOf((byte) i));
     }
 
     private int n() {
@@ -1452,7 +1730,7 @@
     public void t_() {
         super.t_();
         if (!this.world.isClientSide) {
-            int i = this.getArrowsStuck();
+            int i = this.bv();
 
             if (i > 0) {
                 if (this.at <= 0) {
@@ -1461,7 +1739,7 @@
 
                 --this.at;
                 if (this.at <= 0) {
-                    this.setArrowsStuck(i - 1);
+                    this.o(i - 1);
                 }
             }
 
